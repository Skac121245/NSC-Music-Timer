<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NSC Music Timer (Multi-Mode)</title>
    <link rel="stylesheet" href="style.css">

    <!-- WaveSurfer -->
    <script src="https://unpkg.com/wavesurfer.js@6/dist/wavesurfer.min.js"></script>
    <script src="https://unpkg.com/wavesurfer.js@6/dist/plugin/wavesurfer.regions.min.js"></script>
    <script src="https://unpkg.com/wavesurfer.js@6/dist/plugin/wavesurfer.timeline.min.js"></script>

    <!-- Drag & Drop Sorting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
</head>

<body>

<!-- TAB BAR -->
<div id="tabBar">
    <button class="tabBtn active" data-tab="hybrid">Hybrid</button>
    <button class="tabBtn" data-tab="speed">Speed</button>
    <button class="tabBtn" data-tab="burnout">Burnout</button>
</div>

<!-- THREE TAB PAGES -->
<div id="pages">
    <div id="page-hybrid"     class="modePage"></div>
    <div id="page-speed"      class="modePage hidden"></div>
    <div id="page-burnout"    class="modePage hidden"></div>
</div>

<!-- MASTER TEMPLATE (THE FULL APP UI, ONLY WRITTEN ONCE) -->
<template id="appTemplate">
    <div class="appRoot">

    <h1>NSC Music Timer</h1>

    <div id="darkModeToggle">
        <label><input type="checkbox" class="darkSwitch"> Dark Mode</label>
    </div>

    <div class="timeBox">
        <label>Time Limit (minutes):</label>
        <input type="number" class="timeLimit" value="4" min="0.1" step="0.25">
        <button class="saveTimeLimit">Save</button>
    </div>

    <hr>

    <!-- NEW: INTRO TRACK -->
    <h2>Beginning Track (Intro)</h2>
    <p class="hintText">
        Plays before the ANW 3–2–1 beeps. During the 3 beeps, the intro repeats its last 3 seconds at 75% volume so the beeps cut through.
    </p>
    <div class="introContainer"></div>
    <button class="addIntro">Set / Replace Intro</button>
    <button class="clearIntro">Remove Intro</button>

    <hr>

    <h2>Songs</h2>
    <button class="addSong">Add Song</button>
    <div class="songContainer"></div>

    <hr>

    <h2>Beep Cues</h2>
    <div class="beepList"></div>
    <button class="addBeep">Add Beep</button>
    <button class="saveBeeps">Save Beeps</button>

    <hr>

    <h2>Starter Beeps</h2>
    <label>
        <input type="checkbox" class="starterBeepToggle"> Enable ANW Starter Beeps (3–2–1)
    </label>

    <hr>

    <button class="buildTrack">Build Final Track</button>
    <button class="exportTrack" disabled>Export Final Track</button>

    <h2>Final Track</h2>
    <div class="mainTimeline"></div>
    <div class="mainWaveform"></div>

    <h2>Playback Controls</h2>
    <button class="startRun" disabled>Start Run</button>
    <button class="pauseBtn">Pause</button>
    <button class="resumeBtn">Resume</button>
    <button class="restartBtn">Restart</button>
    <hr>

<h2>Coach Talk</h2>
<p class="hintText">
  Hold the button to talk...
</p>

<div class="coachControls">
  <label><input type="checkbox" class="coachRightOnly" checked> Coach audio RIGHT ear only</label>
  <label class="inlineLabel">Right-ear duck:</label>
  <input type="range" class="coachDuck" min="0" max="1" step="0.05" value="0.5">
  <span class="coachDuckVal">50%</span>
</div>

<button class="coachHold" disabled>HOLD TO TALK</button>
<div class="coachStatus">Mic: <span class="coachStatusText">OFF</span></div>

    </div>
</template>

<script src="script.js"></script>
</body>
</html>
